{% extends 'base-full.html' %} {% block content %}
<div class="container mt-5">
  <h3 class="fw-semibold">Account</h3>
  <p>Welcome back, {{ name }}</p>
  <div class="row g-5">
    <div class="col-md-5 col-lg-3">
      <ul class="list-group mb-3">
        <li
          class="list-group-item d-flex justify-content-between lh-sm p-3 active"
        >
          <div>
            <a
              class="my-0 fw-semibold"
              href="{{ url_for('dashboard') }}"
              >Account overview</a
            >
          </div>
        </li>

        <li
          class="list-group-item d-flex justify-content-between lh-sm p-3 active"
        >
          <div>
            <a
              class="my-0 fw-medium"
              href="{{ url_for('staff_orders') }}"
              >Orders</a
            >
          </div>
        </li>

        <li
          class="list-group-item d-flex justify-content-between lh-sm p-3 active"
        >
          <div>
            <a
              class="my-0 fw-medium"
              href="{{ url_for('staff_products') }}"
              >Products</a
            >
          </div>
        </li>

        <li
          class="list-group-item d-flex justify-content-between lh-sm p-3 active"
        >
          <div>
            <a
              class="my-0 fw-medium"
              href="{{ url_for('staff_premadebox') }}"
              >Premade box</a
            >
          </div>
        </li>
        <li
          class="list-group-item d-flex justify-content-between lh-sm p-3 active"
        >
          <div>
            <a
              class="my-0 fw-medium"
              href="{{ url_for('staff_customers') }}"
              >Customers</a
            >
          </div>
        </li>
        <li
          class="list-group-item d-flex justify-content-between lh-sm p-3 active"
        >
          <div>
            <a
              class="my-0 fw-medium"
              href="{{ url_for('staff_reports') }}"
              >Reports</a
            >
          </div>
        </li>
        <li class="list-group-item d-flex justify-content-between lh-sm p-3">
          <div>
            <a
              class="my-0 fw-medium"
              href="{{ url_for('profile') }}"
              >My details</a
            >
          </div>
        </li>
        <li class="list-group-item d-flex justify-content-between lh-sm p-3">
          <div>
            <a
              class="my-0 fw-medium"
              href="{{ url_for('logout') }}"
              >Logout</a
            >
          </div>
        </li>
      </ul>
    </div>
    <div class="col-md-7 col-lg-9">
      <h5 class="fw-semibold mb-4">Reports</h5>
      <div class="d-flex gap-4">
        <div class="col mb-4">
          <div class="card text-center">
            <div class="card-body">
              <h5 class="card-title">Weekly Sales</h5>
              <p class="card-text">${{ reports.weekly_sales | round(2) }}</p>
            </div>
          </div>
        </div>

        <div class="col mb-4">
          <div class="card text-center">
            <div class="card-body">
              <h5 class="card-title">Monthly Sales</h5>
              <p class="card-text">${{ reports.monthly_sales | round(2) }}</p>
            </div>
          </div>
        </div>

        <div class="col mb-4">
          <div class="card text-center">
            <div class="card-body">
              <h5 class="card-title">Yearly Sales</h5>
              <p class="card-text">${{ reports.yearly_sales | round(2) }}</p>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex gap-4">
        <div class="card p-5 col text-center">
          <!-- Most Popular Items Section -->
          <h5>Most Popular Item</h5>
          {% if popularity_items.most_popular %} {% for item in
          popularity_items.most_popular %}
          <div class="text-center mb-2">
            <img
              src="{{ url_for('static', filename=item.img) }}"
              class="img-fluid"
              alt="{{ item.name }}"
              style="width: 180px; height: auto"
            />
          </div>

          <p>{{ item.name }}</p>

          <p><strong>Total Quantity Ordered:</strong> {{ item.quantity }}</p>

          {% endfor %} {% else %}
          <p>No popular items found.</p>
          {% endif %}
        </div>
        <div class="card p-5 col text-center">
          <!-- Least Popular Items Section -->
          <h5>Least Popular Item</h5>
          {% if popularity_items.least_popular %} {% for item in
          popularity_items.least_popular %}
          <div class="text-center mb-2">
            <img
              src="{{ url_for('static', filename=item.img) }}"
              class="img-fluid text-center"
              alt="{{ item.name }}"
              style="width: 180px; height: auto"
            />
          </div>
          <p>{{ item.name }}</p>
          <p><strong>Total Quantity Ordered:</strong> {{ item.quantity }}</p>

          {% endfor %} {% else %}
          <p>No unpopular items found.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
